<h1>Timer</h1><p><br></p><h2>PWM</h2><p><br></p><p>Segnale PWM = Pulse Width Modulation</p><p>IL pwm è un segnale ad onda quadra con un periodo costante e il duty-cycle variabile&nbsp;dc=ton/T</p><p>Viene usato per regolare la velocità di un motore in DC.</p><p>Quando il timer arriva al valore impostato attiva un flag (CCIFG).</p><p>Ad ogni funzione capture/compare è associato un piedino che può essere comandato attraverso l’output mode permettendo di cambiare il segnale del piedino con uno impostato.</p><p>I bit di configurazione di capture/compare si trovano nel registro TaxCCTLn.</p><p><br></p><p>P1DIR |= BIT0;</p><p>P1OUT &amp;= BIT0;</p><p><br></p><p>TA0CTL = TASSEL_2;&nbsp;&nbsp;//imposta il timer ‘SMLCK’</p><p>TA0CTL |= ID_3;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//divide il clock in 8</p><p><br></p><p>TA0CCR0 = 49999;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//setta il valore massimo del timer</p><p>TA0CCR1 = 12500;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//setta il valore di compare</p><p>TA0CTL &amp;= TAIFG;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//azzera il TAIFG</p><p>TA0CTL1 &amp;= CCIFG&nbsp;&nbsp;&nbsp;&nbsp;//azzera il CCIFG;</p><p>TA0CTL |= MC_1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//imposta la modalità ‘up’</p><p><br></p><p>TA0CTL |= TAIE;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//attiva il timer overflow</p><p>TA0CTL1 |= CCIE;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//attiva l’interrupt di compare</p><p><br></p><p>__enable_interrupt();&nbsp;&nbsp;&nbsp;</p>